<form [formGroup]="datosCompromiso" (ngSubmit)="validarFormulario(datosCompromiso.value)">
    <h6 class="text-white bg-primary d-inline-block p-2 px-4 rounded">
        Datos del Compromiso
    </h6>
    <div class="form-group row">
        <div class="col-md-6">
            <label for="compromiso">Compromiso a pagar</label>
            <mat-select class="form-control" placeholder="Seleccione..." formControlName="compromiso" [class.is-invalid]="isInvalid('compromiso')" [disabled]="!editable">
                <cdk-virtual-scroll-viewport itemSize="2" minBufferPx="100" maxBufferPx="200" class="vs-viewport">
                    <mat-option *cdkVirtualFor="let tipoCompromiso of tiposCompromisos" [value]="tipoCompromiso">
                        {{tipoCompromiso.Nombre}}
                    </mat-option>
                </cdk-virtual-scroll-viewport>
            </mat-select>
        </div>
        <div class="col-md-4">
            <label for="numeroCompromiso">No. de Compromiso</label>
            <input type="number" class="form-control" id="numeroCompromiso" formControlName="numeroCompromiso"
                [class.is-invalid]="esInvalido('numeroCompromiso')" [readonly]="!editable">
        </div>
    </div>
    <div class="form-group row">
        <div class="col-md-3">
            <label>Tipo de convenio</label>
            <mat-select class="form-control" placeholder="Seleccione..." formControlName="tipoConvenio" [class.is-invalid]="isInvalid('tipoConvenio')" (selectionChange)="consultarConvenios()" [disabled]="!editable">
                <cdk-virtual-scroll-viewport itemSize="2" minBufferPx="100" maxBufferPx="200" class="vs-viewport-corto">
                    <mat-option *cdkVirtualFor="let tipoConvenio of tiposConvenio" [value]="tipoConvenio">
                        {{tipoConvenio.tipo_convenio}}
                    </mat-option>
                </cdk-virtual-scroll-viewport>
            </mat-select>
        </div>
        <div class="col-md-9">
            <label>Convenio</label>
                <!-- <cdk-virtual-scroll-viewport itemSize="2" minBufferPx="100" maxBufferPx="200" class="vs-viewport"> -->
                    <input type="text" placeholder="{{convenio ? convenio.data.Nombre :'Seleccione...'}}" matInput [formControl]="myControl" [matAutocomplete]="auto"
                    class="form-control" formControlName="convenio" [readonly]="!editable">
                    <mat-autocomplete #auto="matAutocomplete">
                        <mat-option *ngFor="let convenio of filteredOptions | async" [value]="convenio">
                            {{convenio.data.Nombre}}
                        </mat-option>
                    </mat-autocomplete>
                <!-- </cdk-virtual-scroll-viewport> -->
        </div>
    </div>
    <div class="form-group row">
        <div class="col-md-6">
            <label>No. Acta de Recibido</label>
            <input class="form-control" placeholder="{{datosAlmacenadosCompromiso.numeroActa}}" formControlName="actaRecibido" [readonly]="!editable">
        </div>
        <div class="col-md-6">
            <label>No. Entrada al Almacen</label>
            <input class="form-control" formControlName="entradaAlmacen" disabled [value]="entradaAlmacen">
        </div>
    </div>
    <div class="row">
        <div class="col-md-12 form-group">
            <label for="nombreInterventor">Nombre del Supervisor</label>
            <input class="form-control" formControlName="supervisor" disabled>
        </div>
    </div>
    <div class="row">
        <div class="col-md-12 form-group">
            <label >Detalle</label>
            <textarea *ngIf="!!datosAlmacenadosCompromiso" class="form-control" id="detalle" placeholder="{{datosAlmacenadosCompromiso.detalle}}" formControlName="detalle" [readonly]="!editable"></textarea>
        </div>
    </div>
    <div class="row">
        <div class="col-md-6 form-group">
            <label for="tipoOrden">Tipo de Orden de Pago</label>
            <mat-select class="form-control" placeholder="Seleccione..." formControlName="tipoOrdenPago" [class.is-invalid]="isInvalid('tipoOrdenPago')" [disabled]="!editable">
                <cdk-virtual-scroll-viewport itemSize="2" minBufferPx="100" maxBufferPx="200" class="vs-viewport-corto">
                    <mat-option *cdkVirtualFor="let tipoOrdenPago of tiposOrdenesPago" [value]="tipoOrdenPago">
                        {{tipoOrdenPago.Nombre}}
                    </mat-option>
                </cdk-virtual-scroll-viewport>
            </mat-select>
        </div>
    </div>

    <div class="row justify-content-between">
        <div class="col-md-3">
            <button mat-button matStepperPrevious class="btn btn-primary text-white">Anterior</button>
        </div>
        <div class="col-md-3 text-right">
            <button mat-button matStepperNext type="submit" class="btn btn-success">
                Siguiente
            </button>
        </div>
    </div>
</form>